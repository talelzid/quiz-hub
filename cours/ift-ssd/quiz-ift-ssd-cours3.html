<!DOCTYPE html>
<html lang="fr">
<head>
    <script>
      let baseUrl = '/';
      if (!window.location.hostname.includes('localhost') && !window.location.hostname.includes('127.0.0.1')) {
        baseUrl = '/quiz-hub/';
      }
      const baseElement = document.createElement('base');
      baseElement.href = baseUrl;
      document.head.insertBefore(baseElement, document.head.firstChild);
    </script>
    <meta charset="UTF-8">
    <title>Quiz Spécialiste de Données - Cours 2</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="global-course-title">Initiation à la fonction de travail d'un spécialiste de solutions de données</div>
    <h1>Quiz : Les tâches d'un spécialiste de solutions de données vues d'un point de vue cycle de vie (Cours 2)</h1>
    
    <div class="progress-container">
        <div class="progress-info">
            <span id="question-counter">Question 1 / 10</span>
            <div class="progress-stats">
                <span class="stat-badge incorrect"><span class="stat-icon">✕</span><span id="incorrect-count">0</span></span>
                <span class="stat-badge correct"><span class="stat-icon">✓</span><span id="correct-count">0</span></span>
            </div>
        </div>
        <div class="progress-bar-wrapper" id="progressBar"></div>
    </div>
    
    <div id="quiz-container" class="card"></div>
    
    <div id="feedback" class="feedback-container"></div>
    
    <div class="quiz-navigation">
        <button id="prevBtn" onclick="previousQuestion()">← Précédent</button>
        <button id="nextBtn" onclick="nextQuestion()">Suivant →</button>
    </div>
    
    <div id="result"></div>

    <script>
        const questions = [
            {
                q: "Qui suis-je ? Je décide si l'on doit utiliser Microsoft Azure, AWS ou des serveurs locaux, et je dessine le plan d'ensemble du système.",
                options: [
                    { text: "Le Chef de projet", explain: "Le chef de projet gère le calendrier et le budget, pas l'infrastructure technique." },
                    { text: "L'Architecte", explain: "" },
                    { text: "Le Spécialiste de données", explain: "Le spécialiste utilise les outils choisis par l'architecte pour construire les flux." },
                    { text: "Le Développeur", explain: "Le développeur se concentre sur l'application utilisateur finale." }
                ],
                correct: 1,
                correctExplain: "L'architecte a pour mission de définir la structure globale et de choisir les technologies de base du projet."
            },
            {
                q: "Qui suis-je ? Je traduis les besoins flous du client en règles de calcul précises, comme définir ce qu'est un 'client VIP'.",
                options: [
                    { text: "L'Analyste d'affaires (BA)", explain: "" },
                    { text: "Le Testeur (QA)", explain: "Le testeur vérifie le code, il n'établit pas les règles métier initiales." },
                    { text: "L'Architecte", explain: "L'architecte s'occupe de l'infrastructure, pas de la logique métier détaillée." },
                    { text: "Le Scrum Master", explain: "Son rôle est de faciliter le travail de l'équipe, pas de définir les règles de données." }
                ],
                correct: 0,
                correctExplain: "Le BA sert de pont entre le besoin métier du client et la logique technique que le spécialiste devra implémenter."
            },
            {
                q: "Dans le cycle de vie d'un ticket Jira, que signifie l'état 'En révision / Test (QA)' ?",
                options: [
                    { text: "Le spécialiste de données commence à coder.", explain: "Ceci correspond à l'état 'En cours' (In Progress)." },
                    { text: "La tâche est mise en attente.", explain: "Ceci correspondrait à un état 'Bloqué' ou au 'Backlog'." },
                    { text: "La tâche est terminée et livrée.", explain: "Ceci correspond à l'état 'Terminé' (Done)." },
                    { text: "Un collaborateur vérifie le script.", explain: "" }
                ],
                correct: 3,
                correctExplain: "L'étape QA (Quality Assurance) est cruciale pour valider la qualité et détecter les bugs avant que le client ne voie le résultat."
            },
            {
                q: "Qui suis-je ? Je suis votre 'consommateur' interne. J'attends que vous prépariez des tables propres pour les afficher dans une application.",
                options: [
                    { text: "L'Architecte", explain: "L'architecte conçoit le système mais ne code pas l'interface visuelle." },
                    { text: "Le Développeur App", explain: "" },
                    { text: "Le Scrum Master", explain: "Il gère les processus, pas la consommation technique des données." },
                    { text: "L'Analyste d'affaires", explain: "Il définit le besoin mais ne code pas l'affichage final." }
                ],
                correct: 1,
                correctExplain: "Le développeur (Front/Back) utilise les données structurées par le spécialiste pour alimenter l'interface utilisateur."
            },
            {
                q: "Quel est l'objectif principal du 'Daily Stand-up' ?",
                options: [
                    { text: "Réaliser une formation technique.", explain: "La réunion est trop courte (15 min) pour de la formation." },
                    { text: "Synchroniser l'équipe sur les tâches.", explain: "" },
                    { text: "Négocier les délais avec le client.", explain: "Le client n'est généralement pas présent ; c'est une réunion interne à l'équipe." },
                    { text: "Rédiger la documentation du projet.", explain: "La documentation se fait durant les heures de travail, pas en réunion debout." }
                ],
                correct: 1,
                correctExplain: "Le Daily vise à partager ce qui a été fait, ce qui sera fait et à identifier les points de blocage immédiatement."
            },
            {
                q: "Qui suis-je ? On m'appelle le 'Gardien du temps'. Je m'assure que l'équipe respecte le rythme et je lève les obstacles.",
                options: [
                    { text: "Le Spécialiste de données", explain: "Le spécialiste se concentre sur les données, pas sur la gestion de l'équipe." },
                    { text: "L'Architecte", explain: "L'architecte intervient sur la technique, pas sur le suivi humain quotidien." },
                    { text: "Le Chef de projet / Scrum Master", explain: "" },
                    { text: "Le Testeur", explain: "Le testeur gère la qualité du code, pas le calendrier." }
                ],
                correct: 2,
                correctExplain: "Le Scrum Master ou Chef de projet protège l'équipe des distractions et veille à la livraison dans les temps."
            },
            {
                q: "Pourquoi un spécialiste de données doit-il être 'bilingue' ?",
                options: [
                    { text: "Pour parler Anglais et Français.", explain: "C'est utile, mais ce n'est pas le sens de la compétence 'bilingue' en entreprise." },
                    { text: "Pour coder en Python et SQL.", explain: "Ce sont des compétences techniques, pas des modes de communication." },
                    { text: "Pour adapter son discours au public.", explain: "" },
                    { text: "Pour traduire les rapports du client.", explain: "C'est une tâche de traduction, pas une posture de communication d'équipe." }
                ],
                correct: 2,
                correctExplain: "Il doit savoir parler de 'latence' aux techniciens et de 'valeur ajoutée' ou de 'chiffres' au métier/client."
            },
            {
                q: "Qui suis-je ? Ma mission est de prouver que votre script peut casser en injectant des données aberrantes.",
                options: [
                    { text: "Le Développeur", explain: "Le développeur construit l'application." },
                    { text: "L'Analyste d'affaires", explain: "Le BA définit le besoin mais ne teste pas les limites du code." },
                    { text: "Le Testeur (QA)", explain: "" },
                    { text: "L'Architecte", explain: "L'architecte conçoit la structure globale." }
                ],
                correct: 2,
                correctExplain: "Le QA (Quality Assurance) est le 'filet de sécurité' qui trouve les failles avant que le client ne les voie."
            },
            {
                q: "Si un spécialiste dit : 'La clé primaire est corrompue', comment le dire au client ?",
                options: [
                    { text: "Le serveur SQL a un index invalide.", explain: "C'est encore beaucoup trop technique pour un client." },
                    { text: "On a un problème d'identification qui fausse les totaux.", explain: "" },
                    { text: "L'ETL a échoué lamentablement.", explain: "Le jargon 'ETL' ne veut rien dire pour un gestionnaire." },
                    { text: "C'est une erreur de métadonnées.", explain: "Trop abstrait ; le client veut savoir l'impact sur son business." }
                ],
                correct: 1,
                correctExplain: "Il faut expliquer l'impact réel (les totaux sont faux) plutôt que la cause technique (la clé primaire)."
            },
            {
                q: "Que représente un 'Sprint' dans un projet de données ?",
                options: [
                    { text: "Une course de vitesse entre collègues.", explain: "Ce n'est pas une compétition, mais un cadre de travail collaboratif." },
                    { text: "Le moment du déploiement final.", explain: "Le déploiement est une étape, le sprint est une durée de travail." },
                    { text: "Un cycle fixe de travail (ex: 2 semaines).", explain: "" },
                    { text: "Une réunion de crise.", explain: "Un sprint est planifié à l'avance, ce n'est pas une réaction à une urgence." }
                ],
                correct: 2,
                correctExplain: "Le sprint est l'unité de base de la méthodologie Agile pour livrer des morceaux de projet régulièrement."
            }
        ];

        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let answered = new Array(questions.length).fill(false);

        function displayQuestion() {
            const container = document.getElementById('quiz-container');
            const item = questions[currentQuestion];
            
            let html = `<div class="question">${currentQuestion + 1}. ${item.q}</div>`;
            const letters = ['A', 'B', 'C', 'D'];
            item.options.forEach((opt, i) => {
                let classes = '';
                if (answers[currentQuestion] === i) {
                    classes = 'selected ';
                    if (i === item.correct) {
                        classes += 'correct';
                    } else {
                        classes += 'incorrect';
                    }
                }
                const disabledClass = answered[currentQuestion] ? 'disabled' : '';
                html += `<div class="option ${classes} ${disabledClass}" onclick="${answered[currentQuestion] ? '' : `handleAnswerClick(${i})`}" style="${answered[currentQuestion] ? 'cursor: not-allowed;' : ''}"><span class="option-letter">${letters[i]}</span> ${opt.text}</div>`;
            });
            
            container.innerHTML = html;
            
            if (answered[currentQuestion]) {
                showFeedback();
            } else {
                document.getElementById('feedback').innerHTML = '';
                document.getElementById('feedback').classList.remove('show');
            }
            
            updateProgressBar();
            updateNavigationButtons();
            updateProgressInfo();
        }

        function handleAnswerClick(index) {
            if (answered[currentQuestion]) return;
            
            answers[currentQuestion] = index;
            answered[currentQuestion] = true;
            
            showFeedback();
            updateProgressBar();
            updateProgressInfo();
            updateNavigationButtons();
            displayQuestion();
        }

        function showFeedback() {
            const feedbackDiv = document.getElementById('feedback');
            const item = questions[currentQuestion];
            const isCorrect = answers[currentQuestion] === item.correct;
            const selectedOption = item.options[answers[currentQuestion]];
            
            feedbackDiv.className = 'feedback-container show ' + (isCorrect ? 'feedback-correct' : 'feedback-incorrect');
            
            let html = '';
            
            if (isCorrect) {
                html += `
                    <div class="feedback-header">Bonne réponse!</div>
                    <div class="feedback-explanation">${item.correctExplain}</div>
                `;
            } else {
                html += `
                    <div class="feedback-header">Pas tout à fait</div>
                    <div class="feedback-explanation">${selectedOption.explain}</div>
                    <div class="correct-answer-box">
                        <div class="correct-answer-label">✓ Bonne réponse:</div>
                        <div>${item.options[item.correct].text}</div>
                        <div style="margin-top: 8px; font-size: 0.9em;">${item.correctExplain}</div>
                    </div>
                `;
            }
            
            feedbackDiv.innerHTML = html;
        }

        function updateProgressBar() {
            const progressBar = document.getElementById('progressBar');
            progressBar.innerHTML = '';
            
            for (let i = 0; i < questions.length; i++) {
                const segment = document.createElement('div');
                segment.className = 'progress-segment';
                
                if (!answered[i]) {
                    segment.classList.add('unanswered');
                } else if (answers[i] === questions[i].correct) {
                    segment.classList.add('correct');
                } else {
                    segment.classList.add('incorrect');
                }
                
                progressBar.appendChild(segment);
            }
        }

        function updateNavigationButtons() {
            const isAnswered = answered[currentQuestion];
            document.getElementById('prevBtn').disabled = currentQuestion === 0 || !isAnswered;
            document.getElementById('nextBtn').disabled = !isAnswered;
            
            if (currentQuestion === questions.length - 1) {
                document.getElementById('nextBtn').textContent = 'Voir Résultat';
            } else {
                document.getElementById('nextBtn').textContent = 'Suivant →';
            }
        }

        function updateProgressInfo() {
            document.getElementById('question-counter').textContent = `Question ${currentQuestion + 1} / ${questions.length}`;
            
            let correctCount = 0;
            let incorrectCount = 0;
            
            for (let i = 0; i < answers.length; i++) {
                if (answered[i]) {
                    if (answers[i] === questions[i].correct) {
                        correctCount++;
                    } else {
                        incorrectCount++;
                    }
                }
            }
            
            document.getElementById('correct-count').textContent = correctCount;
            document.getElementById('incorrect-count').textContent = incorrectCount;
        }

        function nextQuestion() {
            if (currentQuestion === questions.length - 1) {
                showFinalResults();
                return;
            }
            
            currentQuestion++;
            displayQuestion();
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                displayQuestion();
            }
        }

        function showFinalResults() {
            let score = 0;
            answers.forEach((answer, index) => {
                if (answer === questions[index].correct) score++;
            });
            
            const container = document.getElementById('quiz-container');
            container.innerHTML = '<div class="question">Quiz terminé!</div>';
            
            const feedbackDiv = document.getElementById('feedback');
            feedbackDiv.className = 'feedback-container';
            feedbackDiv.innerHTML = '';
            
            let recapHtml = '<div class="recap-title">Résumé de vos réponses</div>';
            
            questions.forEach((question, index) => {
                const userAnswer = question.options[answers[index]];
                const correctAnswer = question.options[question.correct];
                const isCorrect = answers[index] === question.correct;
                
                recapHtml += `
                    <div class="recap-card ${isCorrect ? 'correct' : 'incorrect'}">
                        <div class="recap-number">Question ${index + 1} / ${questions.length}</div>
                        <div class="recap-question">${question.q}</div>
                        <div class="recap-answer-item user">
                            <span class="recap-label">Votre réponse:</span>
                            ${userAnswer.text}
                            <span class="recap-result ${isCorrect ? 'correct' : 'incorrect'}">
                                ${isCorrect ? '✓ Correct' : '✗ Incorrect'}
                            </span>
                        </div>
                        ${!isCorrect ? `
                            <div class="recap-answer-item correct-answer">
                                <span class="recap-label">Bonne réponse:</span>
                                ${correctAnswer.text}
                            </div>
                        ` : ''}
                    </div>
                `;
            });
            
            document.getElementById('result').innerHTML = `
                <div style="font-size: 2em; margin: 30px 0 20px;">Votre score : ${score} / ${questions.length}</div>
                <div style="font-size: 1.1em; color: #555; margin-bottom: 30px;">Réussite : ${Math.round(score / questions.length * 100)}%</div>
                <div class="recap-container">${recapHtml}</div>
            `;
            
            document.getElementById('prevBtn').disabled = false;
            document.getElementById('nextBtn').textContent = 'Recommencer';
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('nextBtn').onclick = function() { location.reload(); };
            document.getElementById('prevBtn').onclick = function() {
                currentQuestion = questions.length - 1;
                displayQuestion();
            };
        }

        displayQuestion();
    </script>
</body>
</html>
